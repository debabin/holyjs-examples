import{c as Xe,o as et,j as t,B as O,S as G,G as tt,p as nt,q as je,s as xe,t as rt,v as Q,w as A,x as Ne,d as W,y as ue,F as de,z as P,E as U,L as R,H as M,I as oe,J as B,K as L,r as T,M as at,N as st,Q as Fe,U as ot,V as q,W as it,Y as lt,Z as ct,a as Ee,_ as ke,$ as ut,a0 as dt,a1 as mt,a2 as ft,a3 as ht,a4 as vt,a5 as gt,a6 as Te,m as xt,n as pt}from"./main-zFq7zC_h.js";import{S as J,I as V}from"./skeleton-Bm235YGM.js";import{g as jt,a as yt,b as Nt,c as ee,d as Ct,e as St,f as wt,h as bt}from"./index-EDXpyI9G.js";import{a as Oe,s as It}from"./index-CAmX4lj4.js";import"./index-BfZ0Q78_.js";import"./redux-saga-effects.esm-CmDjhKgN.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Xe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),Et=()=>({functions:{onGoogleClick:()=>{var a,r;((r=(a=window==null?void 0:window.google)==null?void 0:a.accounts)==null?void 0:r.oauth2.initTokenClient({client_id:"330577919686-606uq677jeq7no7dhrrkarnroecm23n5.apps.googleusercontent.com",scope:"openid profile email",callback:s=>{et.get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${s.access_token}`,{headers:{Authorization:`Bearer ${s.access_token}`,Accept:"application/json"}}).then(o=>{console.log("@",o),document.cookie=`googleAccessToken=${s.access_token}; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/`}).catch(o=>console.log(o))}})).requestAccessToken()}}}),Ce=({loading:e})=>{const{functions:n}=Et();return t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t"})}),t.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:t.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs(O,{disabled:e,type:"button",variant:"outline",children:[e?t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(tt,{className:"mr-2 h-4 w-4"}),"GitHub"]}),t.jsxs(O,{disabled:e,type:"button",variant:"outline",onClick:n.onGoogleClick,children:[e?t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(nt,{className:"mr-2 h-4 w-4"}),"Google"]})]})]})},kt=()=>t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Login to your account"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email and password"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(J,{className:"h-10 w-full"}),t.jsx(J,{className:"h-10 w-full"}),t.jsx(J,{className:"h-10 w-full"})]}),t.jsx("div",{className:"flex justify-center py-3",children:t.jsx(J,{className:"h-4 w-[200px]"})}),t.jsx(Ce,{loading:!0}),t.jsxs("p",{className:"mt-4 flex flex-col gap-2 px-8",children:[t.jsx(J,{className:"h-3 w-full"}),t.jsx(J,{className:"h-3 w-full"})]})]})]}),Tt=(e,n)=>{if(n==="email"){const[a,r]=e.split("@");return`${a.substring(0,Math.ceil(a.length/2))+"*".repeat(Math.floor(a.length/2))}@${r}`}if(n==="phone"){const a=e.substring(0,e.length-10),r=e.substring(e.length-10);return a+"*".repeat(5)+r.substring(5)}},Ae=(e,n,a)=>{if(e&&"reportValidity"in e){const r=je(a,n);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Pe=(e,n)=>{for(const a in n.fields){const r=n.fields[a];r&&r.ref&&"reportValidity"in r.ref?Ae(r.ref,a,e):r.refs&&r.refs.forEach(s=>Ae(s,a,e))}},At=(e,n)=>{n.shouldUseNativeValidation&&Pe(e,n);const a={};for(const r in e){const s=je(n.fields,r),o=Object.assign(e[r]||{},{ref:s&&s.ref});if(Vt(n.names||Object.keys(e),r)){const l=Object.assign({},je(a,r));xe(l,"root",o),xe(a,r,l)}else xe(a,r,o)}return a},Vt=(e,n)=>e.some(a=>a.startsWith(n+"."));var Rt=function(e,n){for(var a={};e.length;){var r=e[0],s=r.code,o=r.message,l=r.path.join(".");if(!a[l])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];a[l]={message:u.message,type:u.code}}else a[l]={message:o,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(y){return y.errors.forEach(function(w){return e.push(w)})}),n){var m=a[l].types,h=m&&m[r.code];a[l]=rt(l,n,a,s,h?[].concat(h,r.message):r.message)}e.shift()}return a},me=function(e,n,a){return a===void 0&&(a={}),function(r,s,o){try{return Promise.resolve(function(l,u){try{var m=Promise.resolve(e[a.mode==="sync"?"parse":"parseAsync"](r,n)).then(function(h){return o.shouldUseNativeValidation&&Pe({},o),{errors:{},values:a.raw?r:h}})}catch(h){return u(h)}return m&&m.then?m.then(void 0,u):m}(0,function(l){if(function(u){return Array.isArray(u==null?void 0:u.errors)}(l))return{values:{},errors:At(Rt(l.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw l}))}catch(l){return Promise.reject(l)}}};const Ot=Q({otp:A().min(6)}),Pt=()=>{const e=Ne(),n=W(jt),a=W(yt),r=W(Nt),s=ue({resolver:me(Ot),reValidateMode:"onSubmit"}),o=()=>e(ee.onOtpResend.action()),l=s.handleSubmit(m=>e(ee.onConfirmationSubmit.action({values:m,setError:h=>s.setError("otp",{message:h})}))),u=()=>e(Oe.setStage("signUp"));return{state:{loading:n,otp:a,seconds:r.seconds},form:s,functions:{onSubmit:l,goToSignUp:u,onOtpResend:o}}},Ut=()=>{const{form:e,state:n,functions:a}=Pt();return t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Two factor authentication"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["We sent you a code to your ",n.otp.type," ",Tt(n.otp.resource,n.otp.type)]})]}),t.jsx("div",{className:"grid gap-2",children:t.jsx(de,{...e,children:t.jsxs("form",{className:"space-y-4",onSubmit:r=>{r.preventDefault(),a.onSubmit()},children:[t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"otp",children:"Password"}),t.jsx(M,{children:t.jsx(oe,{disabled:n.loading,id:V.INPUT.OTP,maxLength:6,autoCapitalize:"none",autoComplete:"otp",autoCorrect:"off",placeholder:"your otp code",...r})}),t.jsx(B,{})]}),name:"otp",control:e.control}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs(O,{className:"w-full",disabled:n.loading,id:V.BUTTON.CONFIRM,type:"submit",children:[n.loading&&t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm"]}),!!n.seconds&&t.jsx("div",{children:t.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["try again after ",n.seconds," seconds"]})}),!n.seconds&&t.jsxs(O,{className:"w-full",disabled:n.loading,type:"button",variant:"outline",onClick:a.onOtpResend,children:[n.loading&&t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Send otp"]})]})]})})})]})};function Ue(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]]);return a}var ie;(function(e){e.event="event",e.props="prop"})(ie||(ie={}));function $(){}function Mt(e){var n,a=void 0;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return n&&r.length===n.length&&r.every(function(o,l){return o===n[l]})||(n=r,a=e.apply(void 0,r)),a}}function te(e){return!!(e||"").match(/\d/)}function le(e){return e==null}function Bt(e){return typeof e=="number"&&isNaN(e)}function Lt(e){return le(e)||Bt(e)||typeof e=="number"&&!isFinite(e)}function _t(e){var n=T.useRef(e);n.current=e;var a=T.useRef(function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return n.current.apply(n,r)});return a.current}function Ve(e,n){return Array(n+1).join(e)}function Dt(e){var n=e+"",a=n[0]==="-"?"-":"";a&&(n=n.substring(1));var r=n.split(/[eE]/g),s=r[0],o=r[1];if(o=Number(o),!o)return a+s;s=s.replace(".","");var l=1+o,u=s.length;return l<0?s="0."+Ve("0",Math.abs(l))+s:l>=u?s=s+Ve("0",l-u):s=(s.substring(0,l)||"0")+"."+s.substring(l),a+s}function ye(e,n){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",n),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(n,n),!0):(e.focus(),!1)}}var zt=Mt(function(e,n){for(var a=0,r=0,s=e.length,o=n.length;e[a]===n[a]&&a<s;)a++;for(;e[s-1-r]===n[o-1-r]&&o-r>a&&s-r>a;)r++;return{from:{start:a,end:s-r},to:{start:a,end:o-r}}}),Gt=function(e,n){var a=Math.min(e.selectionStart,n);return{from:{start:a,end:e.selectionEnd},to:{start:a,end:n}}};function Kt(e,n,a){return Math.min(Math.max(e,n),a)}function pe(e){return Math.max(e.selectionStart,e.selectionEnd)}function $t(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function qt(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Me(e,n){return e===void 0&&(e=" "),typeof e=="string"?e:e[n]||" "}function Wt(e){var n=e.currentValue,a=e.formattedValue,r=e.currentValueIndex,s=e.formattedValueIndex;return n[r]===a[s]}function Ht(e,n,a,r,s,o,l){l===void 0&&(l=Wt);var u=s.findIndex(function(F){return F}),m=e.slice(0,u);!n&&!a.startsWith(m)&&(n=m,a=m+a,r=r+m.length);for(var h=a.length,y=e.length,w={},v=new Array(h),C=0;C<h;C++){v[C]=-1;for(var d=0,b=y;d<b;d++){var N=l({currentValue:a,lastValue:n,formattedValue:e,currentValueIndex:C,formattedValueIndex:d});if(N&&w[d]!==!0){v[C]=d,w[d]=!0;break}}}for(var g=r;g<h&&(v[g]===-1||!o(a[g]));)g++;var E=g===h||v[g]===-1?y:v[g];for(g=r-1;g>0&&v[g]===-1;)g--;var S=g===-1||v[g]===-1?0:v[g]+1;return S>E?E:r-S<E-r?S:E}function ce(e,n,a,r){var s=e.length;if(n=Kt(n,0,s),r==="left"){for(;n>=0&&!a[n];)n--;n===-1&&(n=a.indexOf(!0))}else{for(;n<=s&&!a[n];)n++;n>s&&(n=a.lastIndexOf(!0))}return n===-1&&(n=s),n}function Yt(e){for(var n=Array.from({length:e.length+1}).map(function(){return!0}),a=0,r=n.length;a<r;a++)n[a]=!!(te(e[a])||te(e[a-1]));return n}function Jt(e,n,a,r,s,o){o===void 0&&(o=$);var l=_t(function(d,b){var N,g;return Lt(d)?(g="",N=""):typeof d=="number"||b?(g=typeof d=="number"?Dt(d):d,N=r(g)):(g=s(d,void 0),N=r(g)),{formattedValue:N,numAsString:g}}),u=T.useState(function(){return l(le(e)?n:e,a)}),m=u[0],h=u[1],y=function(d,b){d.formattedValue!==m.formattedValue&&h({formattedValue:d.formattedValue,numAsString:d.value}),o(d,b)},w=e,v=a;le(e)&&(w=m.numAsString,v=!0);var C=l(w,v);return T.useMemo(function(){h(C)},[C.formattedValue]),[m,y]}function Qt(e){return e.replace(/[^0-9]/g,"")}function Zt(e){return e}function Xt(e){var n=e.type;n===void 0&&(n="text");var a=e.displayType;a===void 0&&(a="input");var r=e.customInput,s=e.renderText,o=e.getInputRef,l=e.format;l===void 0&&(l=Zt);var u=e.removeFormatting;u===void 0&&(u=Qt);var m=e.defaultValue,h=e.valueIsNumericString,y=e.onValueChange,w=e.isAllowed,v=e.onChange;v===void 0&&(v=$);var C=e.onKeyDown;C===void 0&&(C=$);var d=e.onMouseUp;d===void 0&&(d=$);var b=e.onFocus;b===void 0&&(b=$);var N=e.onBlur;N===void 0&&(N=$);var g=e.value,E=e.getCaretBoundary;E===void 0&&(E=Yt);var S=e.isValidInputCharacter;S===void 0&&(S=te);var F=e.isCharacterSame,K=Ue(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),ne=Jt(g,m,!!h,l,u,y),Se=ne[0],I=Se.formattedValue,re=Se.numAsString,Be=ne[1],ae=T.useRef(),se=T.useRef({formattedValue:I,numAsString:re}),we=function(i,c){se.current={formattedValue:i.formattedValue,numAsString:i.value},Be(i,c)},be=T.useState(!1),Le=be[0],_e=be[1],Z=T.useRef(null),H=T.useRef({setCaretTimeout:null,focusTimeout:null});T.useEffect(function(){return _e(!0),function(){clearTimeout(H.current.setCaretTimeout),clearTimeout(H.current.focusTimeout)}},[]);var De=l,fe=function(i,c){var f=parseFloat(c);return{formattedValue:i,value:c,floatValue:isNaN(f)?void 0:f}},Y=function(i,c,f){i.selectionStart===0&&i.selectionEnd===i.value.length||(ye(i,c),H.current.setCaretTimeout=setTimeout(function(){i.value===f&&i.selectionStart!==c&&ye(i,c)},0))},X=function(i,c,f){return ce(i,c,E(i),f)},he=function(i,c,f){var p=E(c),k=Ht(c,I,i,f,p,S,F);return k=ce(c,k,p),k},ze=function(i){var c=i.formattedValue;c===void 0&&(c="");var f=i.input,p=i.source,k=i.event,j=i.numAsString,x;if(f){var _=i.inputValue||f.value,D=pe(f);f.value=c,x=he(_,c,D),x!==void 0&&Y(f,x,c)}c!==I&&we(fe(c,j),{event:k,source:p})};T.useEffect(function(){var i=se.current,c=i.formattedValue,f=i.numAsString;(I!==c||re!==f)&&we(fe(I,re),{event:void 0,source:ie.props})},[I,re]);var Ge=Z.current?pe(Z.current):void 0,Ke=typeof window<"u"?T.useLayoutEffect:T.useEffect;Ke(function(){var i=Z.current;if(I!==se.current.formattedValue&&i){var c=he(se.current.formattedValue,I,Ge);i.value=I,Y(i,c,I)}},[I]);var $e=function(i,c,f){var p=c.target,k=ae.current?Gt(ae.current,p.selectionEnd):zt(I,i),j=Object.assign(Object.assign({},k),{lastValue:I}),x=u(i,j),_=De(x);if(x=u(_,void 0),w&&!w(fe(_,x))){var D=c.target,z=pe(D),ge=he(i,I,z);return D.value=I,Y(D,ge,I),!1}return ze({formattedValue:_,numAsString:x,inputValue:i,event:c,source:f,input:c.target}),!0},ve=function(i,c){c===void 0&&(c=0);var f=i.selectionStart,p=i.selectionEnd;ae.current={selectionStart:f,selectionEnd:p+c}},qe=function(i){var c=i.target,f=c.value,p=$e(f,i,ie.event);p&&v(i),ae.current=void 0},We=function(i){var c=i.target,f=i.key,p=c.selectionStart,k=c.selectionEnd,j=c.value;j===void 0&&(j="");var x;f==="ArrowLeft"||f==="Backspace"?x=Math.max(p-1,0):f==="ArrowRight"?x=Math.min(p+1,j.length):f==="Delete"&&(x=p);var _=0;f==="Delete"&&p===k&&(_=1);var D=f==="ArrowLeft"||f==="ArrowRight";if(x===void 0||p!==k&&!D){C(i),ve(c,_);return}var z=x;if(D){var ge=f==="ArrowLeft"?"left":"right";z=X(j,x,ge),z!==x&&i.preventDefault()}else f==="Delete"&&!S(j[x])?z=X(j,x,"right"):f==="Backspace"&&!S(j[x])&&(z=X(j,x,"left"));z!==x&&Y(c,z,j),C(i),ve(c,_)},He=function(i){var c=i.target,f=function(){var p=c.selectionStart,k=c.selectionEnd,j=c.value;if(j===void 0&&(j=""),p===k){var x=X(j,p);x!==p&&Y(c,x,j)}};f(),requestAnimationFrame(function(){f()}),d(i),ve(c)},Ye=function(i){i.persist&&i.persist();var c=i.target,f=i.currentTarget;Z.current=c,H.current.focusTimeout=setTimeout(function(){var p=c.selectionStart,k=c.selectionEnd,j=c.value;j===void 0&&(j="");var x=X(j,p);x!==p&&!(p===0&&k===j.length)&&Y(c,x,j),b(Object.assign(Object.assign({},i),{currentTarget:f}))},0)},Je=function(i){Z.current=null,clearTimeout(H.current.focusTimeout),clearTimeout(H.current.setCaretTimeout),N(i)},Qe=Le&&$t()?"numeric":void 0,Ie=Object.assign({inputMode:Qe},K,{type:n,value:I,onChange:qe,onKeyDown:We,onMouseUp:He,onFocus:Ye,onBlur:Je});if(a==="text")return s?L.createElement(L.Fragment,null,s(I,K)||null):L.createElement("span",Object.assign({},K,{ref:o}),I);if(r){var Ze=r;return L.createElement(Ze,Object.assign({},Ie,{ref:o}))}return L.createElement("input",Object.assign({},Ie,{ref:o}))}function en(e,n){var a=n.format,r=n.allowEmptyFormatting,s=n.mask,o=n.patternChar;if(o===void 0&&(o="#"),e===""&&!r)return"";for(var l=0,u=a.split(""),m=0,h=a.length;m<h;m++)a[m]===o&&(u[m]=e[l]||Me(s,l),l+=1);return u.join("")}function tn(e,n,a){n===void 0&&(n=qt(e));var r=a.format,s=a.patternChar;s===void 0&&(s="#");var o=n.from,l=n.to,u=n.lastValue;u===void 0&&(u="");var m=function(N){return r[N]===s},h=function(N,g){for(var E="",S=0;S<N.length;S++)m(g+S)&&te(N[S])&&(E+=N[S]);return E},y=function(N){return N.replace(/[^0-9]/g,"")};if(!r.match(/\d/))return y(e);if((u===""||o.end-o.start===u.length)&&e.length===r.length){for(var w="",v=0;v<e.length;v++)if(m(v))te(e[v])&&(w+=e[v]);else if(e[v]!==r[v])return y(e);return w}var C=u.substring(0,o.start),d=e.substring(l.start,l.end),b=u.substring(o.end);return""+h(C,0)+y(d)+h(b,o.end)}function nn(e,n){var a=n.format,r=n.mask,s=n.patternChar;s===void 0&&(s="#");var o=Array.from({length:e.length+1}).map(function(){return!0}),l=0,u=-1,m={};a.split("").forEach(function(v,C){var d=void 0;v===s&&(l++,d=Me(r,l-1),u===-1&&e[C]===d&&(u=C)),m[C]=d});for(var h=function(v){return a[v]===s&&e[v]!==m[v]},y=0,w=o.length;y<w;y++)o[y]=y===u||h(y)||h(y-1);return o[a.indexOf(s)]=!0,o}function rn(e){var n=e.mask;if(n){var a=n==="string"?n:n.toString();if(a.match(/\d/g))throw new Error("Mask "+n+" should not contain numeric character;")}}function an(e,n){return e===""?!0:!(n!=null&&n.match(/\d/))&&typeof e=="string"&&(!!e.match(/^\d+$/)||e==="")}function sn(e){e.mask,e.allowEmptyFormatting;var n=e.format,a=e.inputMode;a===void 0&&(a="numeric");var r=e.onKeyDown;r===void 0&&(r=$);var s=e.patternChar;s===void 0&&(s="#");var o=e.value,l=e.defaultValue,u=e.valueIsNumericString,m=Ue(e,["mask","allowEmptyFormatting","format","inputMode","onKeyDown","patternChar","value","defaultValue","valueIsNumericString"]);rn(e);var h=function(d){return nn(d,e)},y=function(d){var b=d.key,N=d.target,g=N.selectionStart,E=N.selectionEnd,S=N.value;if(g!==E){r(d);return}var F=g;if(b==="Backspace"||b==="Delete"){var K="right";if(b==="Backspace"){for(;F>0&&n[F-1]!==s;)F--;K="left"}else{for(var ne=n.length;F<ne&&n[F]!==s;)F++;K="right"}F=ce(S,F,h(S),K)}else n[F]!==s&&b!=="ArrowLeft"&&b!=="ArrowRight"&&(F=ce(S,F+1,h(S),"right"));F!==g&&ye(N,F),r(d)},w=le(o)?l:o,v=u??an(w,n),C=Object.assign(Object.assign({},e),{valueIsNumericString:v});return Object.assign(Object.assign({},m),{value:o,defaultValue:l,valueIsNumericString:v,inputMode:a,format:function(d){return en(d,C)},removeFormatting:function(d,b){return tn(d,b,C)},getCaretBoundary:h,onKeyDown:y})}function on(e){var n=sn(e);return L.createElement(Xt,Object.assign({},n))}const{useDispatch:ln,useSelector:En}=at,cn=Q({resource:A().email()}),un=Q({resource:A()}),dn=()=>{const e=ln(),n=W(Ct),[a,r]=L.useState("select"),[s,o]=L.useState("phone"),[l,u]=L.useState(!1),m=()=>r("form"),h=ue({resolver:me(s==="email"?cn:un)}),y=()=>{h.reset(),r("select")},w=h.handleSubmit(v=>e(ee.onSelectConfirmationSubmit.action({values:v,selectedResource:s})));return{form:h,state:{termsChecked:l,selectedResource:s,selectConfirmationFormStage:a,loading:n},functions:{setTermsChecked:u,setSelectedResource:o,onSelectContinue:m,onFormBack:y,onSubmit:w}}},mn=()=>{const{state:e,functions:n,form:a}=dn();return t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[e.selectConfirmationFormStage==="select"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Choose resource for otp code"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"We sent you a code to your resource"})]}),t.jsxs(st,{className:"flex flex-col space-y-2",defaultValue:e.selectedResource,onValueChange:r=>n.setSelectedResource(r),children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Fe,{id:"email",value:"email"}),t.jsx(R,{htmlFor:"email",children:"email"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Fe,{id:"phone",value:"phone"}),t.jsx(R,{htmlFor:"phone",children:"phone"})]})]}),t.jsxs("div",{className:"items-top flex space-x-2",children:[t.jsx(ot,{checked:e.termsChecked,id:"terms",onCheckedChange:r=>n.setTermsChecked(r)}),t.jsxs("div",{className:"grid gap-1.5 leading-none",children:[t.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"terms",children:"Accept terms and conditions"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["You agree to our"," ",t.jsx("a",{href:"/terms",className:"underline underline-offset-4 hover:text-primary",children:"Terms of Service"})," ","and"," ",t.jsx("a",{href:"/privacy",className:"underline underline-offset-4 hover:text-primary",children:"Privacy Policy"}),"."]})]})]}),t.jsx(O,{className:"w-full",disabled:!e.termsChecked,onClick:n.onSelectContinue,children:"Continue"})]}),e.selectConfirmationFormStage==="form"&&t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Two factor authentication"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"We sent you a code to your email"})]}),t.jsx("div",{className:"grid gap-2",children:t.jsx(de,{...a,children:t.jsxs("form",{className:"space-y-4",onSubmit:r=>{r.preventDefault(),n.onSubmit()},children:[t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"otp",children:e.selectedResource==="email"?"Email":"Phone"}),t.jsx(M,{children:t.jsxs(t.Fragment,{children:[e.selectedResource==="email"&&t.jsx(q,{id:"resource",placeholder:"write email",...r}),e.selectedResource==="phone"&&t.jsx(on,{allowEmptyFormatting:!0,customInput:q,format:"+7 ### ### ####",...r})]})}),t.jsx(B,{})]}),name:"resource",control:a.control}),t.jsxs(O,{className:"w-full",disabled:e.loading,type:"submit",children:[e.loading&&t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm"]}),t.jsxs(O,{className:"w-full",disabled:e.loading,type:"button",variant:"outline",onClick:n.onFormBack,children:[e.loading&&t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Back"]})]})})})]})]})},fn=Q({login:A().email({message:"Invalid email address"})}),hn=Q({login:A().optional(),password:A()}),vn=()=>{const e=Ne(),n=W(St),[a,r]=L.useState("login"),s=ue({resolver:me(a==="email"?fn:hn)}),o=it({control:s.control,name:"login"});L.useEffect(()=>{const h=A().email().safeParse(o);r(h.success?"email":"login")},[o]);const l=s.handleSubmit(m=>e(ee.onSignInSubmit.action({values:m,resource:a})));return{state:{loading:n,isEmail:a==="email"},form:s,functions:{onSubmit:l,goToSignUp:()=>e(Oe.setStage("signUp"))}}},gn=()=>{const{form:e,functions:n,state:a}=vn();return t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Login to your account"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email and password"})]}),t.jsxs("div",{children:[t.jsx(de,{...e,children:t.jsxs("form",{className:"space-y-4",onSubmit:r=>{r.preventDefault(),n.onSubmit()},children:[t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"login",children:a.isEmail?"email":"login"}),t.jsx(M,{children:t.jsx(q,{disabled:a.loading,autoCapitalize:"none",autoCorrect:"off",placeholder:"write login or email",...r})}),t.jsx(B,{})]}),name:"login",control:e.control}),!a.isEmail&&t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"password",children:"Password"}),t.jsx(M,{children:t.jsx(oe,{disabled:a.loading,autoCapitalize:"none",autoComplete:"password",autoCorrect:"off",placeholder:"your very secret password",...r})}),t.jsx(B,{})]}),name:"password",control:e.control}),t.jsxs(O,{className:"w-full",disabled:a.loading,type:"submit",children:[a.loading&&t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign in"]})]})}),t.jsx("div",{className:"flex justify-center",children:t.jsx(O,{disabled:a.loading,variant:"link",onClick:n.goToSignUp,children:t.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"create new account"})})}),t.jsx(Ce,{loading:a.loading}),t.jsxs("p",{className:"mt-4 px-8 text-center text-sm text-muted-foreground",children:["By clicking continue, you agree to our"," ",t.jsx("a",{href:"/terms",className:"underline underline-offset-4 hover:text-primary",children:"Terms of Service"})," ","and"," ",t.jsx("a",{href:"/privacy",className:"underline underline-offset-4 hover:text-primary",children:"Privacy Policy"})]})]})]})},xn=Q({email:A().email({message:"Invalid email address"}),login:A(),password:A().min(6,{message:"Password must be at least 6 characters long"}),passwordConfirmation:A(),firstName:A().optional(),lastName:A().optional()}),Re=[{id:1,label:"Russia",code:"ru"},{id:3,label:"Belarus",code:"by"},{id:4,label:"Kazakhstan",code:"kz"},{id:5,label:"Uzbekistan",code:"uz"}],pn=()=>{const e=Ne(),n=W(wt),a=ue({defaultValues:{country:Re[0]},resolver:me(xn)}),r=()=>e(It.actions.setStage("signIn")),s=a.handleSubmit(l=>e(ee.onSignUpSubmit.action({values:l}))),o=a.watch("password")===a.watch("passwordConfirmation");return{state:{loading:n,isPasswordsEqual:o,countries:Re},form:a,functions:{onSubmit:s,goToSignIn:r}}},jn=()=>{const{form:e,state:n,functions:a}=pn();return t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create an account"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email below to create your account"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(de,{...e,children:t.jsxs("form",{className:"space-y-6",onSubmit:async r=>{r.preventDefault(),await a.onSubmit()},children:[t.jsx(P,{render:({field:r})=>t.jsxs(U,{id:V.INPUT.EMAIL,children:[t.jsx(R,{className:"sr-only",htmlFor:"email",children:"Email"}),t.jsx(M,{children:t.jsx(q,{disabled:n.loading,autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",placeholder:"email@example.com",...r})}),t.jsx(B,{})]}),name:"email",control:e.control}),t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"login",children:"Login"}),t.jsx(M,{children:t.jsx(q,{disabled:n.loading,id:V.INPUT.LOGIN,autoCapitalize:"none",autoCorrect:"off",placeholder:"your login",...r})}),t.jsx(B,{})]}),name:"login",control:e.control}),t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"firstName",children:"First name"}),t.jsx(M,{children:t.jsx(q,{disabled:n.loading,id:V.INPUT.FIRST_NAME,autoCapitalize:"none",autoComplete:"firstName",autoCorrect:"off",placeholder:"your first perfect name",...r})}),t.jsx(B,{})]}),name:"firstName",control:e.control}),t.jsx(P,{render:({field:r})=>t.jsxs(U,{children:[t.jsx(R,{className:"sr-only",htmlFor:"lastName",children:"Last name"}),t.jsx(M,{children:t.jsx(q,{disabled:n.loading,id:V.INPUT.LAST_NAME,autoCapitalize:"none",autoComplete:"lastName",autoCorrect:"off",placeholder:"your second amazing name",...r})}),t.jsx(B,{})]}),name:"lastName",control:e.control}),t.jsx(P,{render:({field:r})=>t.jsxs(U,{className:"flex flex-col",children:[t.jsxs(lt,{children:[t.jsx(ct,{asChild:!0,children:t.jsx(M,{children:t.jsxs(O,{className:Ee("w-full justify-between",!r.value&&"text-muted-foreground"),id:V.SELECT.COUNTRY,variant:"outline",role:"combobox",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ke,{className:"size-4",code:r.value.code}),n.countries.find(s=>s.id===r.value.id).label]}),t.jsx(Ft,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),t.jsx(ut,{className:"w-[280px] p-0",children:t.jsxs(dt,{children:[t.jsx(mt,{placeholder:"Search country..."}),t.jsx(ft,{children:"No country found."}),t.jsx(ht,{children:n.countries.map(s=>{var o;return t.jsxs(vt,{className:"flex items-center gap-2",value:s.label,onSelect:()=>{e.setValue("country",s)},children:[t.jsx(gt,{className:Ee("mr-2 h-4 w-4",s.id===((o=r.value)==null?void 0:o.id)?"opacity-100":"opacity-0")}),t.jsx(ke,{className:"size-4",code:s.code}),t.jsx("span",{id:`${V.SELECT.COUNTRY}-${s.code}`,children:s.label})]},s.id)})})]})})]}),t.jsx(B,{})]}),name:"country",control:e.control}),t.jsx(P,{render:({field:r})=>t.jsxs(U,{id:V.INPUT.PASSWORD,children:[t.jsx(R,{className:"sr-only",htmlFor:"password",children:"Password"}),t.jsx(M,{children:t.jsx(oe,{disabled:n.loading,autoCapitalize:"none",autoComplete:"password",autoCorrect:"off",placeholder:"your very secret password",...r})}),t.jsx(B,{})]}),name:"password",control:e.control}),t.jsx(P,{render:({field:r})=>t.jsxs(U,{id:V.INPUT.PASSWORD_CONFIRMATION,children:[t.jsx(R,{className:"sr-only",htmlFor:"passwordConfirmation",children:"Confirm password"}),t.jsx(M,{children:t.jsx(oe,{disabled:n.loading,autoCapitalize:"none",autoComplete:"passwordConfirmation",autoCorrect:"off",placeholder:"confirm your password dude",...r})}),n.isPasswordsEqual&&!!r.value&&t.jsx(Te,{children:"passwords are equal 🔥"}),!n.isPasswordsEqual&&t.jsx(Te,{children:"confirm your password"}),t.jsx(B,{})]}),name:"passwordConfirmation",control:e.control}),t.jsxs(O,{className:"w-full",disabled:n.loading,id:V.BUTTON.SIGN_UP,children:[n.loading&&t.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign up"]})]})}),t.jsx("div",{className:"flex justify-center ",children:t.jsx(O,{disabled:n.loading,variant:"link",onClick:a.goToSignIn,children:t.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"have account already"})})}),t.jsx(Ce,{loading:n.loading})]})]})},yn={signIn:t.jsx(gn,{}),signUp:t.jsx(jn,{}),selectConfirmation:t.jsx(mn,{}),confirmation:t.jsx(Ut,{})},Nn=()=>{const e=W(bt);return t.jsx("section",{id:V.PAGE.AUTH,children:yn[e]})},kn=xt(pt.AUTH)({component:Nn,pendingComponent:kt});export{kn as Route};
