import{R as d,x,y as h,z as p,D as o,E as m,F as g,j as e,C as f,l as S,m as v,A as C,o as N,q as b,G as u,B as y,H as w,v as O,w as R}from"./index-BmL7ZD0X.js";import{B as j,S as z,a as E,b as I,c as D,d as G,L as M}from"./sheet-DWk6hkkl.js";const n=t=>d.useSyncExternalStore(t.subscribe,t.getSnapshot),$=t=>{const s=d.useMemo(()=>x(`cardStore.${t}`,()=>o.get()[t]),[]);return{state:{card:n(s)},functions:{setDragging:c=>{const l=o.get();l[t]={...l[t],isDragging:c},m.set(c?t:null)},incrementReaction:h,positionChange:p,setOffset:c=>g.set(c)}}},B=({id:t})=>{const{state:s,functions:a}=$(t);return e.jsxs(f,{style:{zIndex:s.card.isDragging?50:1,cursor:"pointer",left:`${s.card.position.x}px`,top:`${s.card.position.y}px`,width:`${s.card.size.width}px`,height:`${s.card.size.height}px`,position:"absolute",userSelect:"none"},onMouseDown:r=>{a.setOffset({x:s.card.position.x-r.clientX+s.card.size.width/2,y:s.card.position.y-r.clientY+s.card.size.height/2}),a.setDragging(!0)},onMouseMove:r=>a.positionChange({y:r.clientY,x:r.clientX}),onMouseUp:()=>a.setDragging(!1),children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:s.card.id}),e.jsx(C,{className:"h-10 w-10",children:e.jsx(N,{alt:s.card.title,src:s.card.image})})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-md font-bold",children:s.card.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.card.description}),e.jsx("div",{className:"my-2 flex gap-2",children:Object.entries(s.card.reactions).map(([r,i])=>e.jsxs(j,{variant:"outline",onClick:c=>{c.stopPropagation(),a.incrementReaction(s.card.id,r)},children:[r," ",i]},r))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{children:["x: ",s.card.position.x]}),e.jsxs("div",{children:["y: ",s.card.position.y]})]})]})]})},T=({id:t})=>{const s=d.useMemo(()=>x(`cardStore.${t}`,()=>o.get()[t]),[]),a=n(s);return e.jsxs("div",{className:"my-2 flex gap-2",children:[a.title,Object.entries(a.reactions).map(([r,i])=>e.jsxs(j,{className:"cursor-pointer select-none",variant:"outline",onClick:()=>h(a.id,r),children:[r," ",i]},r))]})},H=()=>{const t=n(o),s=Object.values(t).reduce((a,r)=>a+Object.values(r.reactions).reduce((i,c)=>i+c,0),0);return e.jsxs("p",{className:"text-sm",children:["reactions count: ",e.jsx("b",{children:s})]})},A=()=>{const t=n(u),s=n(m);return e.jsxs("div",{className:"absolute left-5 top-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium",children:"Github cards"}),e.jsx(H,{})]}),e.jsxs(z,{children:[e.jsx(E,{children:e.jsx(y,{children:"Open"})}),e.jsx(I,{className:"flex justify-center overflow-y-auto p-4 sm:max-w-[450px]",children:e.jsxs(D,{children:[e.jsx(G,{children:"Cards"}),e.jsx("div",{className:"flex flex-col gap-2",children:t.map(a=>e.jsx(T,{id:a.id},a.id))})]})})]})]}),s&&e.jsxs("p",{className:"text-sm",children:["selected: ",e.jsx("b",{children:s})]})]})},F=()=>{const t=n(u),s=n(w);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-screen w-full",children:[s&&e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(M,{className:"size-6 animate-spin"})}),t.map(a=>e.jsx(B,{id:a.id},a.id))]}),!!t.length&&e.jsx(A,{})]})},k=O(R.GITHUB)({component:F});export{k as Route};
